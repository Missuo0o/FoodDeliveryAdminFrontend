{"remainingRequest":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huoxiyi/IdeaProjects/MissuoFrontend/src/views/employee/addEmployee.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/src/views/employee/addEmployee.vue","mtime":1706155110696},{"path":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huoxiyi/IdeaProjects/MissuoFrontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport HeadLable from '@/components/HeadLable/index.vue'\r\nimport { queryEmployeeById, addEmployee, editEmployee } from '@/api/employee'\r\n\r\n@Component({\r\n  name: 'addShop',\r\n  components: {\r\n    HeadLable\r\n  }\r\n})\r\nexport default class extends Vue {\r\n  private title = '添加员工'\r\n  private actionType = ''\r\n  private ruleForm = {\r\n    name: '',\r\n    phone: '',\r\n    // 'password': '',\r\n    // 'rePassword': '',\r\n    sex: 'Male',\r\n    idNumber: '',\r\n    username: ''\r\n  }\r\n\r\n  // private validateRepassword (rule:any, value:any, callback:any) {\r\n  //   if (value === '') {\r\n  //     callback(new Error('请再次输入密码'))\r\n  //   } else if (value !== this.ruleForm.password) {\r\n  //     callback(new Error('两次输入密码不一致!'))\r\n  //   } else {\r\n  //     callback()\r\n  //   }\r\n  // }\r\n\r\n  // private isCellPhone(val: any) {\r\n  //   if (!/^1(3|4|5|6|7|8)\\d{9}$/.test(val)) {\r\n  //     return false\r\n  //   } else {\r\n  //     return true\r\n  //   }\r\n  // }\r\n\r\n  // private checkphone(rule: any, value: any, callback: any) {\r\n  //   // let phoneReg = /(^1[3|4|5|6|7|8|9]\\d{9}$)|(^09\\d{8}$)/;\r\n  //   if (value == '') {\r\n  //     callback(new Error('请输入手机号'))\r\n  //   } else if (!this.isCellPhone(value)) {\r\n  //     //引入methods中封装的检查手机格式的方法\r\n  //     callback(new Error('请输入正确的手机号!'))\r\n  //   } else {\r\n  //     callback()\r\n  //   }\r\n  // }\r\n\r\n  // private validID(rule: any, value: any, callback: any) {\r\n  //   // 身份证号码为15位或者18位，15位时全为数字，18位前17位为数字，最后一位是校验位，可能为数字或字符X\r\n  //   let reg = /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/\r\n  //   if (value == '') {\r\n  //     callback(new Error('请输入身份证号码'))\r\n  //   } else if (reg.test(value)) {\r\n  //     callback()\r\n  //   } else {\r\n  //     callback(new Error('身份证号码不正确'))\r\n  //   }\r\n  // }\r\n\r\n  get rules() {\r\n    return {\r\n      name: [\r\n        {\r\n          required: true,\r\n          // 'message': '请输入员工姓名',\r\n          validator: (rule: any, value: string, callback: Function) => {\r\n            if (!value) {\r\n              callback(new Error('请输入员工姓名'))\r\n            } else {\r\n              // const reg = /^[\\u4e00-\\u9fa5_a-zA-Z]{1,12}$/\r\n              // if (!reg.test(value)) {\r\n              //   callback(new Error('姓名输入不符，请输入1-12个字符'))\r\n              // } else {\r\n              //   callback()\r\n              // }\r\n              callback()\r\n            }\r\n          },\r\n          trigger: 'blur'\r\n        }\r\n      ],\r\n      username: [\r\n        {\r\n          required: true,\r\n          // message: '请输入账号',\r\n          validator: (rule: any, value: string, callback: Function) => {\r\n            if (!value) {\r\n              callback(new Error('Please enter your username'))\r\n            } else {\r\n              const reg = /^([a-z]|[0-9]){3,20}$/\r\n              if (!reg.test(value)) {\r\n                callback(new Error('Account number input does not match, please enter 3-20 characters'))\r\n              } else {\r\n                callback()\r\n              }\r\n            }\r\n          },\r\n          trigger: 'blur'\r\n        }\r\n      ],\r\n  //     phone: [{ required: true, validator: this.checkphone, trigger: 'blur' }],\r\n  //     idNumber: [{ required: true, validator: this.validID, trigger: 'blur' }]\r\n    }\r\n  }\r\n\r\n  created() {\r\n    this.actionType = this.$route.query.id ? 'edit' : 'add'\r\n    if (this.$route.query.id) {\r\n      this.title = 'Update Employee'\r\n      this.init()\r\n    }\r\n  }\r\n\r\n  private async init() {\r\n    const id = this.$route.query.id\r\n    queryEmployeeById(id).then((res: any) => {\r\n      // String(res.status) === '200'\r\n      if (res.data.code === 200) {\r\n        this.ruleForm = res.data.data\r\n        this.ruleForm.sex = res.data.data.sex === '0' ? 'Female' : 'Male'\r\n        // this.ruleForm.password = ''\r\n      } else {\r\n        this.$message.error(res.data.msg)\r\n      }\r\n      // if (res.data.code == 200) {\r\n      //   const { data } = res.data\r\n      //   this.ruleForm = data\r\n      //   this.ruleForm.password = ''\r\n      //   // this.ruleForm.rePassword = '' //JSON.parse(JSON.stringify(data.password));\r\n      // } else {\r\n      //   this.$message.error(res.data.desc)\r\n      // }\r\n    })\r\n  }\r\n\r\n  private submitForm(formName: any, st: any) {\r\n    ;(this.$refs[formName] as any).validate((valid: any) => {\r\n      if (valid) {\r\n        if (this.actionType === 'add') {\r\n          const params = {\r\n            ...this.ruleForm,\r\n            sex: this.ruleForm.sex === 'Female' ? 0 : 1\r\n          }\r\n          addEmployee(params)\r\n            .then((res: any) => {\r\n              if (res.data.code === 200) {\r\n                this.$message.success('Success ！')\r\n                if (!st) {\r\n                  this.$router.push({ path: '/employee' })\r\n                } else {\r\n                  this.ruleForm = {\r\n                    username: '',\r\n                    name: '',\r\n                    phone: '',\r\n                    // 'password': '',\r\n                    // 'rePassword': '',/\r\n                    sex: 'Male',\r\n                    idNumber: ''\r\n                  }\r\n                }\r\n              } else {\r\n                this.$message.error(res.data.msg)\r\n              }\r\n            })\r\n            .catch(() => {\r\n              // this.$message.error('请求出错了：' + err.message)\r\n            })\r\n        } else {\r\n          const params = {\r\n            ...this.ruleForm,\r\n            sex: this.ruleForm.sex === 'Female' ? 0 : 1\r\n          }\r\n          editEmployee(params)\r\n            .then((res: any) => {\r\n              if (res.data.code === 200) {\r\n                this.$message.success('Success ！')\r\n                this.$router.push({ path: '/employee' })\r\n              } else {\r\n                this.$message.error(res.data.msg)\r\n              }\r\n            })\r\n            .catch(() => {\r\n              // this.$message.error('请求出错了：' + err.message)\r\n            })\r\n        }\r\n      } else {\r\n        return false\r\n      }\r\n    })\r\n  }\r\n}\r\n",{"version":3,"sources":["addEmployee.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addEmployee.vue","sourceRoot":"src/views/employee","sourcesContent":["<template>\r\n  <div class=\"addBrand-container\">\r\n    <HeadLable :title=\"title\"\r\n               :goback=\"true\" />\r\n    <div class=\"container\">\r\n      <el-form ref=\"ruleForm\"\r\n               :model=\"ruleForm\"\r\n               :rules=\"rules\"\r\n               :inline=\"false\"\r\n               label-width=\"180px\"\r\n               class=\"demo-ruleForm\">\r\n        <!--          <el-form-item label=\"员工职级\" prop=\"region\">-->\r\n        <!--            <el-select v-model=\"ruleForm.region\" placeholder=\"请选择品牌名称\">-->\r\n        <!--              <el-option label=\"区域一\" value=\"shanghai\"></el-option>-->\r\n        <!--              <el-option label=\"区域二\" value=\"beijing\"></el-option>-->\r\n        <!--            </el-select>-->\r\n        <!--            <el-button @click=\"submitForm('ruleForm')\" type=\"primary\" class=\"continue\" style=\"margin-left: 10px;\" >+新增职级</el-button>-->\r\n        <!--          </el-form-item>-->\r\n        <el-form-item label=\"Username:\"\r\n                      prop=\"username\">\r\n          <el-input v-model=\"ruleForm.username\"\r\n                    placeholder=\"Please enter the username\"\r\n                    maxlength=\"20\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"Name:\"\r\n                      prop=\"name\">\r\n          <el-input v-model=\"ruleForm.name\"\r\n                    placeholder=\"Please enter the name\"\r\n                    maxlength=\"12\" />\r\n        </el-form-item>\r\n        <!-- <el-form-item\r\n          label=\"密码:\"\r\n          prop=\"password\"\r\n        >\r\n          <el-input\r\n            v-model=\"ruleForm.password\"\r\n            type=\"password\"\r\n            autocomplete=\"off\"\r\n            placeholder=\"请输入密码\"\r\n          />\r\n        </el-form-item> -->\r\n        <!-- <el-form-item\r\n          label=\"确认密码:\"\r\n          prop=\"rePassword\"\r\n        >\r\n          <el-input\r\n            v-model=\"ruleForm.rePassword\"\r\n            type=\"password\"\r\n            autocomplete=\"off\"\r\n            placeholder=\"请输入确认密码\"\r\n          />\r\n        </el-form-item> -->\r\n        <el-form-item label=\"Phone:\"\r\n                      prop=\"phone\">\r\n          <el-input v-model=\"ruleForm.phone\"\r\n                    placeholder=\"Please enter the phone\"\r\n                    maxlength=\"10\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"Sex:\"\r\n                      prop=\"sex\">\r\n          <el-radio-group v-model=\"ruleForm.sex\">\r\n            <el-radio label=\"Male\" />\r\n            <el-radio label=\"Female\" />\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"IdNumber:\"\r\n                      prop=\"idNumber\"\r\n                      class=\"idNumber\">\r\n          <el-input v-model=\"ruleForm.idNumber\"\r\n                    placeholder=\"Please enter the idNumber\"\r\n                    maxlength=\"10\" />\r\n        </el-form-item>\r\n        <div class=\"subBox address\">\r\n          <!-- <el-form-item> -->\r\n          <el-button @click=\"() => $router.push('/employee')\">\r\n            Cancel\r\n          </el-button>\r\n          <el-button type=\"primary\"\r\n                     :class=\"{ continue: actionType === 'add' }\"\r\n                     @click=\"submitForm('ruleForm', false)\">\r\n            Submit\r\n          </el-button>\r\n          <el-button v-if=\"actionType == 'add'\"\r\n                     type=\"primary\"\r\n                     @click=\"submitForm('ruleForm', true)\">\r\n            Submit and continue adding\r\n          </el-button>\r\n          <!-- </el-form-item> -->\r\n        </div>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport HeadLable from '@/components/HeadLable/index.vue'\r\nimport { queryEmployeeById, addEmployee, editEmployee } from '@/api/employee'\r\n\r\n@Component({\r\n  name: 'addShop',\r\n  components: {\r\n    HeadLable\r\n  }\r\n})\r\nexport default class extends Vue {\r\n  private title = '添加员工'\r\n  private actionType = ''\r\n  private ruleForm = {\r\n    name: '',\r\n    phone: '',\r\n    // 'password': '',\r\n    // 'rePassword': '',\r\n    sex: 'Male',\r\n    idNumber: '',\r\n    username: ''\r\n  }\r\n\r\n  // private validateRepassword (rule:any, value:any, callback:any) {\r\n  //   if (value === '') {\r\n  //     callback(new Error('请再次输入密码'))\r\n  //   } else if (value !== this.ruleForm.password) {\r\n  //     callback(new Error('两次输入密码不一致!'))\r\n  //   } else {\r\n  //     callback()\r\n  //   }\r\n  // }\r\n\r\n  // private isCellPhone(val: any) {\r\n  //   if (!/^1(3|4|5|6|7|8)\\d{9}$/.test(val)) {\r\n  //     return false\r\n  //   } else {\r\n  //     return true\r\n  //   }\r\n  // }\r\n\r\n  // private checkphone(rule: any, value: any, callback: any) {\r\n  //   // let phoneReg = /(^1[3|4|5|6|7|8|9]\\d{9}$)|(^09\\d{8}$)/;\r\n  //   if (value == '') {\r\n  //     callback(new Error('请输入手机号'))\r\n  //   } else if (!this.isCellPhone(value)) {\r\n  //     //引入methods中封装的检查手机格式的方法\r\n  //     callback(new Error('请输入正确的手机号!'))\r\n  //   } else {\r\n  //     callback()\r\n  //   }\r\n  // }\r\n\r\n  // private validID(rule: any, value: any, callback: any) {\r\n  //   // 身份证号码为15位或者18位，15位时全为数字，18位前17位为数字，最后一位是校验位，可能为数字或字符X\r\n  //   let reg = /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/\r\n  //   if (value == '') {\r\n  //     callback(new Error('请输入身份证号码'))\r\n  //   } else if (reg.test(value)) {\r\n  //     callback()\r\n  //   } else {\r\n  //     callback(new Error('身份证号码不正确'))\r\n  //   }\r\n  // }\r\n\r\n  get rules() {\r\n    return {\r\n      name: [\r\n        {\r\n          required: true,\r\n          // 'message': '请输入员工姓名',\r\n          validator: (rule: any, value: string, callback: Function) => {\r\n            if (!value) {\r\n              callback(new Error('请输入员工姓名'))\r\n            } else {\r\n              // const reg = /^[\\u4e00-\\u9fa5_a-zA-Z]{1,12}$/\r\n              // if (!reg.test(value)) {\r\n              //   callback(new Error('姓名输入不符，请输入1-12个字符'))\r\n              // } else {\r\n              //   callback()\r\n              // }\r\n              callback()\r\n            }\r\n          },\r\n          trigger: 'blur'\r\n        }\r\n      ],\r\n      username: [\r\n        {\r\n          required: true,\r\n          // message: '请输入账号',\r\n          validator: (rule: any, value: string, callback: Function) => {\r\n            if (!value) {\r\n              callback(new Error('Please enter your username'))\r\n            } else {\r\n              const reg = /^([a-z]|[0-9]){3,20}$/\r\n              if (!reg.test(value)) {\r\n                callback(new Error('Account number input does not match, please enter 3-20 characters'))\r\n              } else {\r\n                callback()\r\n              }\r\n            }\r\n          },\r\n          trigger: 'blur'\r\n        }\r\n      ],\r\n  //     phone: [{ required: true, validator: this.checkphone, trigger: 'blur' }],\r\n  //     idNumber: [{ required: true, validator: this.validID, trigger: 'blur' }]\r\n    }\r\n  }\r\n\r\n  created() {\r\n    this.actionType = this.$route.query.id ? 'edit' : 'add'\r\n    if (this.$route.query.id) {\r\n      this.title = 'Update Employee'\r\n      this.init()\r\n    }\r\n  }\r\n\r\n  private async init() {\r\n    const id = this.$route.query.id\r\n    queryEmployeeById(id).then((res: any) => {\r\n      // String(res.status) === '200'\r\n      if (res.data.code === 200) {\r\n        this.ruleForm = res.data.data\r\n        this.ruleForm.sex = res.data.data.sex === '0' ? 'Female' : 'Male'\r\n        // this.ruleForm.password = ''\r\n      } else {\r\n        this.$message.error(res.data.msg)\r\n      }\r\n      // if (res.data.code == 200) {\r\n      //   const { data } = res.data\r\n      //   this.ruleForm = data\r\n      //   this.ruleForm.password = ''\r\n      //   // this.ruleForm.rePassword = '' //JSON.parse(JSON.stringify(data.password));\r\n      // } else {\r\n      //   this.$message.error(res.data.desc)\r\n      // }\r\n    })\r\n  }\r\n\r\n  private submitForm(formName: any, st: any) {\r\n    ;(this.$refs[formName] as any).validate((valid: any) => {\r\n      if (valid) {\r\n        if (this.actionType === 'add') {\r\n          const params = {\r\n            ...this.ruleForm,\r\n            sex: this.ruleForm.sex === 'Female' ? 0 : 1\r\n          }\r\n          addEmployee(params)\r\n            .then((res: any) => {\r\n              if (res.data.code === 200) {\r\n                this.$message.success('Success ！')\r\n                if (!st) {\r\n                  this.$router.push({ path: '/employee' })\r\n                } else {\r\n                  this.ruleForm = {\r\n                    username: '',\r\n                    name: '',\r\n                    phone: '',\r\n                    // 'password': '',\r\n                    // 'rePassword': '',/\r\n                    sex: 'Male',\r\n                    idNumber: ''\r\n                  }\r\n                }\r\n              } else {\r\n                this.$message.error(res.data.msg)\r\n              }\r\n            })\r\n            .catch(() => {\r\n              // this.$message.error('请求出错了：' + err.message)\r\n            })\r\n        } else {\r\n          const params = {\r\n            ...this.ruleForm,\r\n            sex: this.ruleForm.sex === 'Female' ? 0 : 1\r\n          }\r\n          editEmployee(params)\r\n            .then((res: any) => {\r\n              if (res.data.code === 200) {\r\n                this.$message.success('Success ！')\r\n                this.$router.push({ path: '/employee' })\r\n              } else {\r\n                this.$message.error(res.data.msg)\r\n              }\r\n            })\r\n            .catch(() => {\r\n              // this.$message.error('请求出错了：' + err.message)\r\n            })\r\n        }\r\n      } else {\r\n        return false\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.addBrand {\r\n  &-container {\r\n    margin: 30px;\r\n    margin-top: 0px;\r\n    .HeadLable {\r\n      background-color: transparent;\r\n      margin-bottom: 0px;\r\n      padding-left: 0px;\r\n    }\r\n    .container {\r\n      position: relative;\r\n      z-index: 1;\r\n      background: #fff;\r\n      padding: 30px;\r\n      border-radius: 4px;\r\n      // min-height: 500px;\r\n      .subBox {\r\n        padding-top: 30px;\r\n        text-align: center;\r\n        border-top: solid 1px $gray-5;\r\n      }\r\n    }\r\n    .idNumber {\r\n      margin-bottom: 39px;\r\n    }\r\n\r\n    .el-form-item {\r\n      margin-bottom: 29px;\r\n    }\r\n    .el-input {\r\n      width: 293px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}